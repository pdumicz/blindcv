[{"name":"/User Flow Components/Upload File","nodes":[{"id":"fbc20b9e-82bb-59e2-b1e3-e3357f7790be","type":"PageStackNavigate","parameters":{"target":"q7eb","tr-shift":{"value":100,"unit":"%"},"tr-crossfade":true,"tr-darkoverlay":false,"tr-timing":{"curve":[0.42,0,0.58,1],"dur":300,"delay":0}},"ports":[],"children":[]},{"id":"f0011837-f533-3b50-ac99-4467f6547717","type":"SetModelProperties","parameters":{"type-Template":"string","properties":"File,anonymise,removeBranding,includeWatermark,watermarkFile,logoFile,roleDescription,candidateMessage,premiumFeatureSelected","type-Anonymise":"boolean","type-includeWatermark":"boolean","type-premiumFeatureSelected":"boolean"},"ports":[],"children":[]},{"id":"178b2b0d-29f7-eacc-4399-ed28a31ab25c","type":"net.noodl.ParentComponentObject","parameters":{"properties":"Signup Object Id"},"ports":[],"children":[]},{"id":"2d1c4904-3158-508f-b2bb-eb0b80381537","type":"Model2","parameters":{"properties":"firstName,lastName,organization"},"ports":[],"children":[]},{"id":"792fd753-d04c-795a-d78e-dcb430c39c8a","type":"Expression","parameters":{"expression":"!!previewUrl"},"ports":[],"children":[]},{"id":"f48310e6-f3be-52b0-b817-5ea314d07bae","type":"States","parameters":{"states":"Default,File Selected","values":"Preview Mounted, Dropzone Mounted","type-Preview Mounted":"boolean","type- Dropzone Mounted":"boolean","value-Default- Dropzone Mounted":true,"value-File Selected-Preview Mounted":true},"ports":[],"children":[]},{"id":"d313274b-5bea-6340-26f7-b32c4896b5b5","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.File || null;\nconst bucket = 'temp_files';\nconst supabase = Noodl.Variables.supabase\n\nif (!file) throw new Error('No file provided');\n\nconst randomSequence = Math.random().toString(36).substring(2, 8);\n\ntry {\n  const { data, error } = await supabase.storage\n    .from(bucket)\n    .upload(`${file.name.split('.').slice(0, -1).join('.')}_${randomSequence}.${file.name.split('.').pop()}`, file);\n\n  if (error) {\n    throw new Error(error)\n  }  \n\n  const { data: urlData, error: urlError } = await supabase.storage\n    .from(bucket)\n    .getPublicUrl(data.path)\n  \n  if (urlError) {\n    throw new Error(urlError)\n  }\n\n  Outputs.Data = urlData;\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error.message;\n  Outputs.Failure();\n}\n"},"ports":[{"name":"in-File","displayName":"File","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Data","displayName":"Data","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"aa8ab28e-5434-b9a8-c88d-5ab436d9349f","type":"Group","parameters":{"paddingTop":{"value":3,"unit":"%"},"alignItems":"center","paddingBottom":{"value":3,"unit":"%"},"paddingLeft":{"value":32,"unit":"px"},"paddingRight":{"value":32,"unit":"px"}},"ports":[],"children":[{"id":"d40cf75a-cedb-d184-5cb1-ec939bab233c","type":"Group","parameters":{"backgroundColor":"Primary Light","rowGap":{"value":80,"unit":"px"},"maxWidth":{"value":1200,"unit":"px"},"columnGap":{"value":80,"unit":"px"},"sizeMode":"contentHeight","alignItems":"flex-start","justifyContent":"center","flexDirection":"row"},"ports":[],"children":[{"id":"b94d9d94-38a8-1701-9e07-c25837f34780","type":"Group","parameters":{"sizeMode":"contentHeight","maxWidth":{"value":500,"unit":"px"},"rowGap":{"value":25,"unit":"px"}},"ports":[],"children":[{"id":"aba6ae90-4d91-c956-09ba-ca141d86f6d0","type":"Group","parameters":{},"ports":[],"children":[{"id":"addb23f0-7728-533f-541b-1570932c0c31","type":"Text","parameters":{"textStyle":"Title Large","color":"Primary","text":"Upload a CV"},"ports":[],"children":[]}]},{"id":"6f1b0b10-0d75-12cf-bc8b-ff795afce542","type":"Group","parameters":{"rowGap":{"value":15,"unit":"px"}},"ports":[],"children":[{"id":"aa93b70b-8412-fb65-79e5-15542773c51a","type":"/CV Dropzone","parameters":{"Accepted file types":"pdf, doc, docx"},"ports":[],"children":[]},{"id":"681a38b5-e74c-6e79-2c27-5f3ca8cdc986","type":"/PDF Viewer","parameters":{"Height":{"value":500,"unit":"px"}},"ports":[],"children":[]}]},{"id":"5053072a-0487-bae9-4cec-4099ee522f5b","type":"Group","parameters":{"flexDirection":"row","justifyContent":"space-between"},"ports":[],"children":[{"id":"f6bd4648-a024-528f-1dac-fbd11c46d73f","type":"net.noodl.controls.checkbox","parameters":{"label":"Anonymise CV"},"ports":[],"children":[]},{"id":"3d6397c2-b455-5601-b656-dced5e93ba89","type":"net.noodl.controls.button","parameters":{"label":"Change File","backgroundColor":"Dark"},"ports":[],"children":[]}]}]},{"id":"17a64136-91b1-10f8-264e-c8ecad203b5f","type":"/User Flow Components/Go Premium Section","parameters":{},"ports":[],"children":[]}]}]},{"id":"ce3ec495-1fff-f805-d772-def4daea6063","type":"/Media Queries/Match Media Query","parameters":{},"ports":[],"children":[]},{"id":"a7f72f25-9c89-6bec-ca9d-73f4fec81814","type":"States","parameters":{"states":"Desktop,Tablet,Mobile","currentState":"Desktop","values":"Layout,Justify,Align","type-Layout":"string","value-Desktop-Layout":"row","value-Tablet-Layout":"column","value-Mobile-Layout":"column","type-Align":"string","type-Justify":"string","value-Desktop-Align":"start","value-Tablet-Align":"center","value-Mobile-Align":"center"},"ports":[],"children":[]}],"connections":[{"sourceId":"178b2b0d-29f7-eacc-4399-ed28a31ab25c","sourcePort":"value-Signup Object Id","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"modelId"},{"sourceId":"f0011837-f533-3b50-ac99-4467f6547717","sourcePort":"stored","targetId":"fbc20b9e-82bb-59e2-b1e3-e3357f7790be","targetPort":"navigate"},{"sourceId":"178b2b0d-29f7-eacc-4399-ed28a31ab25c","sourcePort":"value-Signup Object Id","targetId":"2d1c4904-3158-508f-b2bb-eb0b80381537","targetPort":"modelId"},{"sourceId":"aa93b70b-8412-fb65-79e5-15542773c51a","sourcePort":"File","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"prop-File"},{"sourceId":"f6bd4648-a024-528f-1dac-fbd11c46d73f","sourcePort":"checked","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"prop-anonymise"},{"sourceId":"17a64136-91b1-10f8-264e-c8ecad203b5f","sourcePort":"Do","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"store"},{"sourceId":"17a64136-91b1-10f8-264e-c8ecad203b5f","sourcePort":"premiumFeatureSelected","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"prop-premiumFeatureSelected"},{"sourceId":"17a64136-91b1-10f8-264e-c8ecad203b5f","sourcePort":"watermarkFile","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"prop-watermarkFile"},{"sourceId":"17a64136-91b1-10f8-264e-c8ecad203b5f","sourcePort":"includeWatermark","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"prop-includeWatermark"},{"sourceId":"17a64136-91b1-10f8-264e-c8ecad203b5f","sourcePort":"logoFile","targetId":"f0011837-f533-3b50-ac99-4467f6547717","targetPort":"prop-logoFile"},{"sourceId":"792fd753-d04c-795a-d78e-dcb430c39c8a","sourcePort":"isTrue","targetId":"681a38b5-e74c-6e79-2c27-5f3ca8cdc986","targetPort":"Mounted"},{"sourceId":"792fd753-d04c-795a-d78e-dcb430c39c8a","sourcePort":"isTrueEv","targetId":"f48310e6-f3be-52b0-b817-5ea314d07bae","targetPort":"to-File Selected"},{"sourceId":"f48310e6-f3be-52b0-b817-5ea314d07bae","sourcePort":"at-File Selected","targetId":"681a38b5-e74c-6e79-2c27-5f3ca8cdc986","targetPort":"Mounted"},{"sourceId":"f48310e6-f3be-52b0-b817-5ea314d07bae","sourcePort":"at-Default","targetId":"aa93b70b-8412-fb65-79e5-15542773c51a","targetPort":"Mounted"},{"sourceId":"f48310e6-f3be-52b0-b817-5ea314d07bae","sourcePort":"at-File Selected","targetId":"3d6397c2-b455-5601-b656-dced5e93ba89","targetPort":"mounted"},{"sourceId":"3d6397c2-b455-5601-b656-dced5e93ba89","sourcePort":"onClick","targetId":"f48310e6-f3be-52b0-b817-5ea314d07bae","targetPort":"to-Default"},{"sourceId":"3d6397c2-b455-5601-b656-dced5e93ba89","sourcePort":"onClick","targetId":"aa93b70b-8412-fb65-79e5-15542773c51a","targetPort":"To Default"},{"sourceId":"aa93b70b-8412-fb65-79e5-15542773c51a","sourcePort":"File","targetId":"d313274b-5bea-6340-26f7-b32c4896b5b5","targetPort":"in-File"},{"sourceId":"aa93b70b-8412-fb65-79e5-15542773c51a","sourcePort":"Success","targetId":"d313274b-5bea-6340-26f7-b32c4896b5b5","targetPort":"run"},{"sourceId":"d313274b-5bea-6340-26f7-b32c4896b5b5","sourcePort":"out-Data","targetId":"681a38b5-e74c-6e79-2c27-5f3ca8cdc986","targetPort":"PDF URL"},{"sourceId":"d313274b-5bea-6340-26f7-b32c4896b5b5","sourcePort":"out-Data","targetId":"792fd753-d04c-795a-d78e-dcb430c39c8a","targetPort":"previewUrl"},{"sourceId":"a7f72f25-9c89-6bec-ca9d-73f4fec81814","sourcePort":"Layout","targetId":"d40cf75a-cedb-d184-5cb1-ec939bab233c","targetPort":"flexDirection"},{"sourceId":"ce3ec495-1fff-f805-d772-def4daea6063","sourcePort":"Matches All Mobile","targetId":"a7f72f25-9c89-6bec-ca9d-73f4fec81814","targetPort":"to-Mobile"},{"sourceId":"ce3ec495-1fff-f805-d772-def4daea6063","sourcePort":"Matches Tablet","targetId":"a7f72f25-9c89-6bec-ca9d-73f4fec81814","targetPort":"to-Tablet"},{"sourceId":"ce3ec495-1fff-f805-d772-def4daea6063","sourcePort":"Matches All Desktop","targetId":"a7f72f25-9c89-6bec-ca9d-73f4fec81814","targetPort":"to-Desktop"},{"sourceId":"a7f72f25-9c89-6bec-ca9d-73f4fec81814","sourcePort":"Align","targetId":"d40cf75a-cedb-d184-5cb1-ec939bab233c","targetPort":"alignItems"}],"ports":[],"roots":["aa8ab28e-5434-b9a8-c88d-5ab436d9349f"]}]