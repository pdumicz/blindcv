[{"name":"/Editor/Image Picker","nodes":[{"id":"e91ff2fa-17e1-fca6-c312-948facd36669","type":"Group","parameters":{"height":{"value":60,"unit":"px"},"alignItems":"flex-start","flexDirection":"row","columnGap":{"value":25,"unit":"px"}},"ports":[],"children":[{"id":"162908d3-e8f2-bf6c-5080-eafe197f7b57","type":"Group","parameters":{"sizeMode":"explicit","width":{"value":60,"unit":"px"},"alignItems":"center","justifyContent":"center","backgroundColor":"Grey - 200","paddingLeft":{"value":5,"unit":"px"},"paddingTop":{"value":5,"unit":"px"},"paddingRight":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"},"borderRadius":{"value":4,"unit":"px"}},"ports":[],"children":[{"id":"5d0c7f29-8933-f203-02c6-1c2c62aaed2e","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-image","codeAsClass":true},"iconColor":"Grey - 500","iconSize":{"value":24,"unit":"px"}},"ports":[],"children":[]}]},{"id":"7372f104-c5e2-ebb8-4bcd-ee708a559b90","type":"Image","parameters":{"sizeMode":"contentWidth"},"ports":[],"children":[]},{"id":"59f1f813-5be1-d631-2138-67b2cfabe16e","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":6,"unit":"px"},"alignItems":"center","sizeMode":"contentHeight","rowGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"55e6ea10-7786-6a58-0bfb-69e9f3175d72","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":6,"unit":"px"},"alignItems":"center","styleCss":"cursor: pointer;\n"},"ports":[],"children":[{"id":"8d3880b0-f04a-5ad8-7559-5ca4538fbf8b","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-file-pen","codeAsClass":true},"iconColor":"Primary"},"ports":[],"children":[]},{"id":"ba68f7da-3284-8993-149f-7a82f4417467","type":"Text","parameters":{"text":"Change Photo"},"ports":[],"children":[]}]},{"id":"540f60e4-c01d-1419-a8c1-1fb8db312fc2","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":6,"unit":"px"},"alignItems":"center","styleCss":"cursor: pointer;\n"},"ports":[],"children":[{"id":"51d60210-f1f9-6a99-647d-4267aa861c66","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-trash-can","codeAsClass":true},"iconColor":"Danger"},"ports":[],"children":[]},{"id":"ab1f87f5-0923-c627-6223-072994e9d736","type":"Text","parameters":{"text":"Remove"},"ports":[],"children":[]}]}]},{"id":"e41cd3e1-6e95-9878-32b1-4c8782b49078","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":6,"unit":"px"},"alignItems":"center","sizeMode":"contentHeight"},"ports":[],"children":[{"id":"2638e219-3017-bc28-f2fb-90ed09c3a8c2","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":6,"unit":"px"},"alignItems":"center","styleCss":"cursor: pointer;\n"},"ports":[],"children":[{"id":"2ef1e35f-787f-c0eb-0022-0bdfa3747949","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-file-circle-plus","codeAsClass":true},"iconColor":"Primary"},"ports":[],"children":[]},{"id":"902c2ff1-13d0-8efc-22ee-451dcaecb7a6","type":"Text","parameters":{"text":"Select image"},"ports":[],"children":[]}]}]}]},{"id":"1ec2ebca-fa7a-a3c4-e6e7-feca1a223de9","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"1cd8450c-bf42-c638-e626-b984269a4196","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"cea231df-d776-1e0c-9efc-1cf6770928eb","type":"Expression","parameters":{"expression":"!!image"},"ports":[],"children":[]},{"id":"3152e37f-eaee-713d-9d84-8f90f4c2a459","type":"NavigationShowPopup","parameters":{"target":"/Popups/File Manager"},"ports":[],"children":[]},{"id":"f11c3e7a-4269-8cda-fdf9-8425ea2ae307","type":"JavaScriptFunction","parameters":{"functionScript":"const supabase = Noodl.Variables.supabase;\nconst path = Inputs.Path;\n\n\nconst { data, error } = await supabase\n  .storage\n  .from('resume_photos')\n  .createSignedUrl(path, 600)\n\nOutputs.Source = data.signedUrl\nOutputs.Success()"},"ports":[{"name":"in-Path","displayName":"Path","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Source","displayName":"Source","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","type":"States","parameters":{"states":"No File,File Selected","values":"Mounted at File Selected,Mounted At No File","type-Mounted At No File":"boolean","value-No File-Mounted At No File":true,"type-Mounted at File Selected":"boolean","value-File Selected-Mounted at File Selected":true,"currentState":"No File"},"ports":[],"children":[]}],"connections":[{"sourceId":"1cd8450c-bf42-c638-e626-b984269a4196","sourcePort":"Image","targetId":"cea231df-d776-1e0c-9efc-1cf6770928eb","targetPort":"image"},{"sourceId":"540f60e4-c01d-1419-a8c1-1fb8db312fc2","sourcePort":"onClick","targetId":"1ec2ebca-fa7a-a3c4-e6e7-feca1a223de9","targetPort":"Remove Photo"},{"sourceId":"2638e219-3017-bc28-f2fb-90ed09c3a8c2","sourcePort":"onClick","targetId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","targetPort":"show"},{"sourceId":"cea231df-d776-1e0c-9efc-1cf6770928eb","sourcePort":"isTrueEv","targetId":"f11c3e7a-4269-8cda-fdf9-8425ea2ae307","targetPort":"run"},{"sourceId":"1cd8450c-bf42-c638-e626-b984269a4196","sourcePort":"Image","targetId":"f11c3e7a-4269-8cda-fdf9-8425ea2ae307","targetPort":"in-Path"},{"sourceId":"ba68f7da-3284-8993-149f-7a82f4417467","sourcePort":"onClick","targetId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","targetPort":"show"},{"sourceId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","sourcePort":"closeResult-Image Path","targetId":"1ec2ebca-fa7a-a3c4-e6e7-feca1a223de9","targetPort":"Image Path"},{"sourceId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","sourcePort":"closeAction-Update Image","targetId":"1ec2ebca-fa7a-a3c4-e6e7-feca1a223de9","targetPort":"Update Image"},{"sourceId":"1cd8450c-bf42-c638-e626-b984269a4196","sourcePort":"Mounted","targetId":"e91ff2fa-17e1-fca6-c312-948facd36669","targetPort":"mounted"},{"sourceId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","sourcePort":"closeResult-Image Path","targetId":"cea231df-d776-1e0c-9efc-1cf6770928eb","targetPort":"image"},{"sourceId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","sourcePort":"closeResult-Image Path","targetId":"f11c3e7a-4269-8cda-fdf9-8425ea2ae307","targetPort":"in-Path"},{"sourceId":"cea231df-d776-1e0c-9efc-1cf6770928eb","sourcePort":"isTrueEv","targetId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","targetPort":"to-File Selected"},{"sourceId":"cea231df-d776-1e0c-9efc-1cf6770928eb","sourcePort":"isFalseEv","targetId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","targetPort":"to-No File"},{"sourceId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","sourcePort":"at-File Selected","targetId":"7372f104-c5e2-ebb8-4bcd-ee708a559b90","targetPort":"mounted"},{"sourceId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","sourcePort":"at-File Selected","targetId":"59f1f813-5be1-d631-2138-67b2cfabe16e","targetPort":"mounted"},{"sourceId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","sourcePort":"at-No File","targetId":"162908d3-e8f2-bf6c-5080-eafe197f7b57","targetPort":"mounted"},{"sourceId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","sourcePort":"at-No File","targetId":"e41cd3e1-6e95-9878-32b1-4c8782b49078","targetPort":"mounted"},{"sourceId":"ab1f87f5-0923-c627-6223-072994e9d736","sourcePort":"onClick","targetId":"b30ab53f-44f2-3fd5-f1e8-50ab9fa967d5","targetPort":"to-No File"},{"sourceId":"f11c3e7a-4269-8cda-fdf9-8425ea2ae307","sourcePort":"out-Source","targetId":"7372f104-c5e2-ebb8-4bcd-ee708a559b90","targetPort":"src"},{"sourceId":"3152e37f-eaee-713d-9d84-8f90f4c2a459","sourcePort":"closeAction-Update Image","targetId":"f11c3e7a-4269-8cda-fdf9-8425ea2ae307","targetPort":"run"}],"ports":[{"name":"Open Cropper","type":"*","plug":"output","index":0},{"name":"Remove Photo","type":"signal","plug":"output","index":1},{"name":"Image","type":{"name":"*"},"plug":"input","index":1},{"name":"File","type":"*","plug":"output","index":2},{"name":"Mounted","type":"boolean","default":true,"group":"General","plug":"input","index":2},{"name":"Upload Photo","type":"*","plug":"output","index":3},{"name":"Update Image","type":"signal","plug":"output","index":4},{"name":"Image Path","type":"*","plug":"output","index":5}],"roots":["e91ff2fa-17e1-fca6-c312-948facd36669"]},{"name":"/Popups/File Manager","nodes":[{"id":"e982ac69-79f4-c9b1-7901-678d38cbfe06","type":"Group","parameters":{"alignItems":"center","justifyContent":"center"},"ports":[],"children":[{"id":"0d042434-e3b2-66e1-2221-44725239d9e7","type":"Group","parameters":{"position":"absolute","backgroundColor":"#1F1F1FA5"},"ports":[],"children":[]},{"id":"9448f308-b798-cc5e-5901-9e729fbf6271","type":"Group","parameters":{"sizeMode":"contentSize","paddingTop":{"value":30,"unit":"px"},"paddingLeft":{"value":30,"unit":"px"},"paddingRight":{"value":30,"unit":"px"},"paddingBottom":{"value":30,"unit":"px"},"backgroundColor":"White","borderRadius":{"value":12,"unit":"px"},"rowGap":{"value":16,"unit":"px"},"minWidth":{"value":675,"unit":"px"}},"ports":[],"children":[{"id":"31f75dfe-64de-e700-9c60-ab1d85ba9fdb","type":"Group","parameters":{"rowGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"9dd2004b-2ad8-9e94-7e94-37b3bd461b34","type":"Text","parameters":{"textStyle":"Title Medium","text":"Your files"},"ports":[],"children":[]},{"id":"602cd72d-1f64-5af3-cad5-600ef5e0d874","type":"Group","parameters":{"height":{"value":1,"unit":"px"},"backgroundColor":"Grey - 300"},"ports":[],"children":[]}]},{"id":"3e6d1d19-dd01-083c-b03f-8b7f30da9021","type":"Group","parameters":{},"ports":[],"children":[{"id":"b3c38478-4078-7d10-0c20-2cfd1ff3c51d","type":"/File Drop Zone","parameters":{},"ports":[],"children":[]}]},{"id":"ead6ff48-7dd4-fcec-201d-ef44e72650d1","type":"Group","parameters":{"rowGap":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"43c71402-412d-97ab-acbd-7440e272cf18","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":20,"unit":"px"},"flexWrap":"wrap","maxWidth":{"value":800,"unit":"px"}},"ports":[],"children":[{"id":"e7fb2cac-3596-dd16-d301-0781a474ddaf","type":"For Each","parameters":{"template":"/Popups/File Manager/Image Item"},"ports":[],"children":[]}]},{"id":"30b032f2-d861-dbfb-c434-fdcb75a02d63","type":"/Pages And Rows","parameters":{"Rows Per Page":8,"Per Page Dropdown Mounted":false},"ports":[],"children":[]},{"id":"3bd9c6e9-b213-53da-7d50-382d2279d8c0","type":"Group","parameters":{"alignItems":"flex-end","flexDirection":"row","columnGap":{"value":8,"unit":"px"},"justifyContent":"flex-end"},"ports":[],"children":[{"id":"267f0c49-6f94-853a-da1c-68026bfe44cf","type":"net.noodl.controls.button","variant":"Secondary Button","parameters":{"label":"Cancel"},"ports":[],"children":[]}]}]},{"id":"529dfca6-8548-78e1-d3f7-c87db9fc1d66","type":"Group","parameters":{"paddingTop":{"value":30,"unit":"px"},"paddingBottom":{"value":30,"unit":"px"},"alignItems":"center","rowGap":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"5e0178c3-c861-675c-1291-934b28fe11be","type":"Text","parameters":{"textStyle":"Body Large","text":"No Files","textAlignX":"center"},"ports":[],"children":[]},{"id":"4e9c0298-c7aa-aea0-25b7-3069d6b702af","type":"net.noodl.controls.button","parameters":{"label":"Add an image"},"ports":[],"children":[]}]}]}]},{"id":"fc7484b3-8107-3526-76c3-2b72e4b6f2ca","type":"NavigationClosePopup","parameters":{},"ports":[],"children":[]},{"id":"7728020a-9bdc-1180-acdb-a9f163707fdb","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"d640c5b0-1fc5-c747-5d81-1611d21c35b4","type":"Expression","parameters":{"expression":"!!images.length"},"ports":[],"children":[]},{"id":"129ffdea-7f42-56a0-3350-2e15f7acc910","type":"Inverter","parameters":{},"ports":[],"children":[]},{"id":"95fb9a48-9c72-5423-af23-36547ddce015","type":"/API/Insert Photo Into Storage","parameters":{},"ports":[],"children":[]},{"id":"0580f030-ad9b-399d-eefb-f47f5495e3f0","type":"JavaScriptFunction","parameters":{"functionScript":"const userId = Noodl.Objects.currentUser.auth.id; \nif (!userId) throw new Error('Invalid User ID');    \n\ntry {      \n  const { data, error } = await Noodl.Variables.supabase          \n    .storage          \n    .from('resume_photos')          \n    .list(`${userId}/`);        \n\n  if (error) throw error;        \n\n  // Create an array to store the paths      \n  let paths = [];        \n\n  // Loop through each photo in the bucket      \n  for (let photo of data) {          \n    // Check if the photo name is not '.emptyFolderPlaceholder'\n    if(photo.name !== '.emptyFolderPlaceholder') {\n      // Add the photo name to the paths array with userId and / appended before the image name     \n      paths.push(`${userId}/${photo.name}`);      \n    }\n  }       \n\n  Outputs.Paths = paths;       \n\n  // Create signed URLs for all photos in one request      \n  const { data: signedURLs, error: urlsError } = await Noodl.Variables.supabase          \n    .storage          \n    .from('resume_photos')          \n    .createSignedUrls(paths, 600);        \n\n  if (urlsError) throw urlsError;        \n\n  // Merge the data from the first request with the signed URLs from the second request      \n  let mergedData = paths.map((path, index) => {          \n    // Find the corresponding photo object\n    const photo = data.find(photo => `${userId}/${photo.name}` === path);\n    // Check if the photo name matches the current image\n    return {              \n        ...photo,              \n        signedUrl: signedURLs[index],\n        current: false,\n    }; \n  });        \n\n  // Output the merged object with all properties from both requests      \n  Outputs.Photos = mergedData;      \n  Outputs.Success();  \n} catch (error) {      \n  Outputs.error = error;      \n  Outputs.Failure();  \n}\n"},"ports":[{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Paths","displayName":"Paths","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Photos","displayName":"Photos","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","type":"JavaScriptFunction","parameters":{"functionScript":"const items = Inputs.Items || [];\nconst currentImage = Inputs.CurrentImage || 'default';\nconst limit = Inputs.Limit || 8; // Default limit is 10\nconst skip = Inputs.Skip || 0; // Default skip is 0\n\nif (!items.length || !currentImage) return;\n\ntry {\n  // Pagination logic\n  const paginatedItems = items.slice(skip, skip + limit);\n\n  paginatedItems.forEach(item => {\n    if (item.name === currentImage) {\n      item.current = true;\n    } else {\n      item.current = false;\n    }\n  });\n\n  Outputs.Items = paginatedItems;\n  Outputs.Count = paginatedItems.length; // Output the count of paginated items\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error;\n  Outputs.Failure();\n}\n"},"ports":[{"name":"in-Items","displayName":"Items","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-CurrentImage","displayName":"CurrentImage","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Limit","displayName":"Limit","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Skip","displayName":"Skip","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Items","displayName":"Items","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-Count","displayName":"Count","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"30299afa-52e1-db44-c147-34ec3a244d74","type":"JavaScriptFunction","parameters":{"functionScript":"const selectedImage = Inputs.Item;\nif (!selectedImage) {return}\n\nOutputs.Selection = selectedImage.path;\nOutputs.SelectedImageSrc = selectedImage.signedUrl;"},"ports":[{"name":"in-Item","displayName":"Item","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Selection","displayName":"Selection","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-SelectedImageSrc","displayName":"SelectedImageSrc","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"39a5f704-4c38-0ebc-a4b2-bee514392e9b","type":"Event Receiver","parameters":{"channelName":"fileDeleted","consume":"always"},"ports":[],"children":[]},{"id":"29ac7112-9e85-cdae-86ea-001e742b4eb6","type":"NavigationClosePopup","parameters":{"results":"Image Path,Selected Image Src","closeActions":"Update Image"},"ports":[],"children":[]},{"id":"b22a0794-3919-b049-6e50-19dad6ade473","type":"Set Variable","parameters":{"setWith":"string","name":"selectedImage"},"ports":[],"children":[]}],"connections":[{"sourceId":"0d042434-e3b2-66e1-2221-44725239d9e7","sourcePort":"onClick","targetId":"fc7484b3-8107-3526-76c3-2b72e4b6f2ca","targetPort":"close"},{"sourceId":"d640c5b0-1fc5-c747-5d81-1611d21c35b4","sourcePort":"result","targetId":"129ffdea-7f42-56a0-3350-2e15f7acc910","targetPort":"value"},{"sourceId":"129ffdea-7f42-56a0-3350-2e15f7acc910","sourcePort":"result","targetId":"529dfca6-8548-78e1-d3f7-c87db9fc1d66","targetPort":"mounted"},{"sourceId":"d640c5b0-1fc5-c747-5d81-1611d21c35b4","sourcePort":"result","targetId":"ead6ff48-7dd4-fcec-201d-ef44e72650d1","targetPort":"mounted"},{"sourceId":"e982ac69-79f4-c9b1-7901-678d38cbfe06","sourcePort":"didMount","targetId":"0580f030-ad9b-399d-eefb-f47f5495e3f0","targetPort":"run"},{"sourceId":"0580f030-ad9b-399d-eefb-f47f5495e3f0","sourcePort":"out-Photos","targetId":"d640c5b0-1fc5-c747-5d81-1611d21c35b4","targetPort":"images"},{"sourceId":"0580f030-ad9b-399d-eefb-f47f5495e3f0","sourcePort":"out-Photos","targetId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","targetPort":"in-Items"},{"sourceId":"7728020a-9bdc-1180-acdb-a9f163707fdb","sourcePort":"Image","targetId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","targetPort":"in-CurrentImage"},{"sourceId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","sourcePort":"out-Items","targetId":"e7fb2cac-3596-dd16-d301-0781a474ddaf","targetPort":"items"},{"sourceId":"0580f030-ad9b-399d-eefb-f47f5495e3f0","sourcePort":"out-Success","targetId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","targetPort":"run"},{"sourceId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","sourcePort":"out-Count","targetId":"30b032f2-d861-dbfb-c434-fdcb75a02d63","targetPort":"Total Count"},{"sourceId":"30b032f2-d861-dbfb-c434-fdcb75a02d63","sourcePort":"Skip","targetId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","targetPort":"in-Skip"},{"sourceId":"30b032f2-d861-dbfb-c434-fdcb75a02d63","sourcePort":"Limit","targetId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","targetPort":"in-Limit"},{"sourceId":"e7fb2cac-3596-dd16-d301-0781a474ddaf","sourcePort":"itemOutput-Name","targetId":"948ff537-f2ce-59d0-3bb9-81a48f44c1ad","targetPort":"in-CurrentImage"},{"sourceId":"b3c38478-4078-7d10-0c20-2cfd1ff3c51d","sourcePort":"File","targetId":"95fb9a48-9c72-5423-af23-36547ddce015","targetPort":"File"},{"sourceId":"95fb9a48-9c72-5423-af23-36547ddce015","sourcePort":"Success","targetId":"0580f030-ad9b-399d-eefb-f47f5495e3f0","targetPort":"run"},{"sourceId":"e7fb2cac-3596-dd16-d301-0781a474ddaf","sourcePort":"itemOutput-Signed URL","targetId":"30299afa-52e1-db44-c147-34ec3a244d74","targetPort":"in-Item"},{"sourceId":"39a5f704-4c38-0ebc-a4b2-bee514392e9b","sourcePort":"eventReceived","targetId":"0580f030-ad9b-399d-eefb-f47f5495e3f0","targetPort":"run"},{"sourceId":"267f0c49-6f94-853a-da1c-68026bfe44cf","sourcePort":"onClick","targetId":"fc7484b3-8107-3526-76c3-2b72e4b6f2ca","targetPort":"close"},{"sourceId":"95fb9a48-9c72-5423-af23-36547ddce015","sourcePort":"Success","targetId":"b3c38478-4078-7d10-0c20-2cfd1ff3c51d","targetPort":"To Default"},{"sourceId":"30299afa-52e1-db44-c147-34ec3a244d74","sourcePort":"out-Selection","targetId":"29ac7112-9e85-cdae-86ea-001e742b4eb6","targetPort":"result-Image Path"},{"sourceId":"e7fb2cac-3596-dd16-d301-0781a474ddaf","sourcePort":"itemOutputSignal-Select Image","targetId":"29ac7112-9e85-cdae-86ea-001e742b4eb6","targetPort":"close"},{"sourceId":"e7fb2cac-3596-dd16-d301-0781a474ddaf","sourcePort":"itemOutputSignal-Select Image","targetId":"29ac7112-9e85-cdae-86ea-001e742b4eb6","targetPort":"closeAction-Update Image"},{"sourceId":"30299afa-52e1-db44-c147-34ec3a244d74","sourcePort":"out-SelectedImageSrc","targetId":"29ac7112-9e85-cdae-86ea-001e742b4eb6","targetPort":"result-Selected Image Src"}],"ports":[{"name":"Image","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Image Updated","type":"*","plug":"input","index":2}],"roots":["e982ac69-79f4-c9b1-7901-678d38cbfe06"]},{"name":"/File Drop Zone","nodes":[{"id":"b4d54255-87d2-3109-b441-21279099d510","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"c35f9807-7235-dac9-581b-57670a9301d9","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n    element: {\r\n        type: '*',\r\n        displayName: 'Element',\r\n        group: 'Setup',\r\n    },\r\n    acceptedFileTypes: {\r\n        type: 'string',\r\n        displayName: 'Accepted file types',\r\n        group: 'Data'\r\n    }\r\n}\r\n\r\nScript.Outputs = {\r\n    File: '*',\r\n    Path: 'string',\r\n    Name: 'string',\r\n    SizeInBytes: 'string',\r\n    Type: 'string',\r\n    Success: 'signal',\r\n    // When the mouse is dragging a file over the dropzone\r\n    OnDragOver: 'signal',\r\n    OnDragLeave: 'signal',\r\n}\r\n\r\n// Cache all the acceptedFileTypes in an array as regex expressions\r\nlet acceptedFileTypesPatterns = []\r\n\r\nScript.Setters.acceptedFileTypes = function (value) {\r\n    // Clear the array of patterns,\r\n    // since we will update them now.\r\n    acceptedFileTypesPatterns = [];\r\n\r\n    // If the value is empty we exit early,\r\n    // and we already emptied the patterns array.\r\n    if (!value) {\r\n        return;\r\n    }\r\n\r\n    // We are following the same pattern as the \"Open File Picker\" node.\r\n    // https://docs.noodl.net/2.6/nodes/utilities/open-file-picker/\r\n    const patterns = value.split(\",\");\r\n    if (patterns.length > 0) {\r\n        patterns.forEach((pattern) => {\r\n            const regExp = \".*\" + pattern.replace('*', '.*') + \".*\";\r\n            acceptedFileTypesPatterns.push(new RegExp(regExp));\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * This will be called when a file is dropped.\r\n */\r\nfunction onFileDrop(eventObject) {\r\n    // Get the dropped file\r\n    const file = eventObject.dataTransfer.items[0];\r\n    if (!file) {\r\n        throw new Error('file is empty.');\r\n    }\r\n\r\n    // Update all the outputs\r\n    const fileObject = file.getAsFile();\r\n    Script.Outputs.File = fileObject;\r\n    Script.Outputs.Path = fileObject.path;\r\n    Script.Outputs.Name = fileObject.name;\r\n    Script.Outputs.SizeInBytes = fileObject.size;\r\n    Script.Outputs.Type = fileObject.type;\r\n\r\n    Script.Outputs.Success();\r\n}\r\n\r\n/**\r\n * \"\"\"\r\n * A listener for the dragenter and dragover events are used to\r\n * indicate valid drop targets, that is,\r\n * places where dragged items may be dropped.\r\n * \r\n * Most areas of a web page or application are not valid places\r\n * to drop data. Thus, the default handling of these events\r\n * is not to allow a drop.\r\n * \"\"\"\r\n */\r\n\r\nfunction onDragOver(eventObject) {\r\n    // Check if the user is dragging any files\r\n    if (eventObject.dataTransfer.items.length === 0) {\r\n        // Early exit; the user is not dragging any files.\r\n        return;\r\n    }\r\n\r\n    // Check if we have any custom patterns\r\n    if (acceptedFileTypesPatterns.length === 0) {\r\n        // if not then exit early allowing any pattern\r\n        return eventObject.preventDefault();\r\n    }\r\n\r\n    const file = eventObject.dataTransfer.items[0];\r\n    if (file.kind !== 'file') {\r\n        // Early exit; we don't know what this file is.\r\n        return;\r\n    }\r\n\r\n    for (var i = 0; i < acceptedFileTypesPatterns.length; i++) {\r\n        const pattern = acceptedFileTypesPatterns[i];\r\n\r\n        // Check if this file matches any of the patterns\r\n        if (pattern.test(file.type)) {\r\n            // Mark that this file can be dropped\r\n            eventObject.preventDefault();\r\n\r\n            Script.Outputs.OnDragOver();\r\n\r\n            // Early exit; since we know the file is okay.\r\n            return;\r\n        }\r\n    }\r\n}    \r\n\r\nfunction onDragLeave(_eventObject) {\r\n    console.log('Drag leave triggered');\r\n    Script.Outputs.OnDragLeave();\r\n}\r\n\r\n/**\r\n * \r\n */\r\nNode.Signals.DidMount = function () {\r\n    const element = Script.Inputs.element;\r\n    if (!element) throw new Error(\"Element is not connected.\");\r\n\r\n    const domElement = element.getDOMElement();\r\n    domElement.addEventListener('drop', onFileDrop, false);\r\n    domElement.addEventListener('dragover', onDragOver, false);\r\n    domElement.addEventListener('dragleave', onDragLeave, false);\r\n}\r\n\r\n/**\r\n * We need to remove the event listeners on the element,\r\n * to not leave anything behind.\r\n */\r\nNode.Signals.WillUnmount = function () {\r\n    const element = Script.Inputs.element;\r\n    if (!element) throw new Error(\"Element is not connected.\");\r\n\r\n    const domElement = element.getDOMElement();\r\n    if (domElement) {\r\n        domElement.removeEventListener('drop', onFileDrop, false);\r\n        domElement.removeEventListener('dragover', onDragOver, false);\r\n        domElement.removeEventListener('dragleave', onDragLeave, false);\r\n    }\r\n}\r\n"},"ports":[{"name":"element","plug":"input","type":"*","displayName":"Element","group":"Setup","index":5},{"name":"acceptedFileTypes","plug":"input","type":"string","displayName":"Accepted file types","group":"Data","index":6},{"name":"DidMount","plug":"input","type":{"name":"signal"},"group":"Inputs","index":7},{"name":"WillUnmount","plug":"input","type":{"name":"signal"},"group":"Inputs","index":8},{"name":"File","type":{"name":"*"},"plug":"output","group":"Outputs","index":9},{"name":"Path","type":{"name":"string"},"plug":"output","group":"Outputs","index":10},{"name":"Name","type":{"name":"string"},"plug":"output","group":"Outputs","index":11},{"name":"SizeInBytes","type":{"name":"string"},"plug":"output","group":"Outputs","index":12},{"name":"Type","type":{"name":"string"},"plug":"output","group":"Outputs","index":13},{"name":"Success","type":{"name":"signal"},"plug":"output","group":"Outputs","index":14},{"name":"OnDragOver","type":{"name":"signal"},"plug":"output","group":"Outputs","index":15},{"name":"OnDragLeave","type":{"name":"signal"},"plug":"output","group":"Outputs","index":16}],"children":[]},{"id":"371c7b41-35ec-4a3e-213e-8a7cba40488a","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"38113b84-1887-2f06-0f82-b2eeaf6181f6","type":"Condition","parameters":{},"ports":[],"children":[]},{"id":"d76ee56d-2567-80b7-6803-79ead3acc08f","type":"Boolean","parameters":{"value":true},"ports":[],"children":[]},{"id":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","type":"Open File Picker","parameters":{},"ports":[],"children":[]},{"id":"2cdef8e9-70df-e9a8-8127-2ebc90252f17","type":"String","parameters":{},"ports":[],"children":[]},{"id":"867b8904-f197-bf9e-0803-6b1a970edc57","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"2bd660de-3d6c-0873-d9a5-5f401655827a","type":"States","parameters":{"states":"Default,Hover,Success","values":"Variant,BG Color,Text,Icon,Text Color","type-Variant":"string","value-Default-Variant":"File Dropzone - Default","value-Hover-Variant":"File Dropzone - Hover","type-BG Color":"color","type-Text":"string","type-Icon":"string","value-Default-BG Color":"Grey - 200","value-Hover-BG Color":"Light Gray","value-Success-BG Color":"Success","type-Text Color":"color","value-Success-Text Color":"White","value-Hover-Text Color":"Grey - 900","value-Default-Text Color":"Grey - 600","value-Success-Text":"Success","value-Hover-Text":"Drop CV Here","value-Default-Text":"Upload Images","currentState":"Default"},"ports":[],"children":[]},{"id":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","type":"Group","parameters":{"styleCss":"cursor: pointer;","borderWidth":{"value":1,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"clip":true},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[{"id":"8f758171-ebcf-669e-f6f7-0d8ef67811e3","type":"Group","parameters":{"height":{"value":100,"unit":"px"},"borderWidth":{"value":1,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"alignItems":"center","justifyContent":"center","borderStyle":"none","flexDirection":"row","columnGap":{"value":6,"unit":"px"}},"ports":[],"children":[{"id":"3ad41a1d-c5d2-09af-a7f0-5e4ff4d6f3c5","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-cloud-upload","codeAsClass":true},"iconColor":"Grey - 600","iconSize":{"value":20,"unit":"px"}},"ports":[],"children":[]},{"id":"8d9962c3-5211-9019-37a4-542acf4d22d4","type":"Text","parameters":{"text":"Drop Images Here","textAlignX":"center","textStyle":"Title Medium","fontSize":{"value":16,"unit":"px"},"sizeMode":"contentSize"},"ports":[],"children":[]}]}]},{"id":"58a49dac-f68a-eb14-82db-40beb26c4155","type":"Expression","parameters":{},"ports":[],"children":[]},{"id":"ae839f0b-ae08-8936-8491-78454db28d67","type":"Timer","parameters":{"duration":500},"ports":[],"children":[]}],"connections":[{"sourceId":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","sourcePort":"this","targetId":"c35f9807-7235-dac9-581b-57670a9301d9","targetPort":"element"},{"sourceId":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","sourcePort":"didMount","targetId":"c35f9807-7235-dac9-581b-57670a9301d9","targetPort":"DidMount"},{"sourceId":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","sourcePort":"willUnmount","targetId":"c35f9807-7235-dac9-581b-57670a9301d9","targetPort":"WillUnmount"},{"sourceId":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","sourcePort":"onClick","targetId":"38113b84-1887-2f06-0f82-b2eeaf6181f6","targetPort":"eval"},{"sourceId":"d76ee56d-2567-80b7-6803-79ead3acc08f","sourcePort":"savedValue","targetId":"38113b84-1887-2f06-0f82-b2eeaf6181f6","targetPort":"condition"},{"sourceId":"371c7b41-35ec-4a3e-213e-8a7cba40488a","sourcePort":"Enable File Picker on click","targetId":"d76ee56d-2567-80b7-6803-79ead3acc08f","targetPort":"value"},{"sourceId":"371c7b41-35ec-4a3e-213e-8a7cba40488a","sourcePort":"Open File Picker","targetId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","targetPort":"open"},{"sourceId":"38113b84-1887-2f06-0f82-b2eeaf6181f6","sourcePort":"ontrue","targetId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","targetPort":"open"},{"sourceId":"371c7b41-35ec-4a3e-213e-8a7cba40488a","sourcePort":"Accepted file types","targetId":"2cdef8e9-70df-e9a8-8127-2ebc90252f17","targetPort":"value"},{"sourceId":"2cdef8e9-70df-e9a8-8127-2ebc90252f17","sourcePort":"savedValue","targetId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","targetPort":"acceptedFileTypes"},{"sourceId":"2cdef8e9-70df-e9a8-8127-2ebc90252f17","sourcePort":"savedValue","targetId":"c35f9807-7235-dac9-581b-57670a9301d9","targetPort":"acceptedFileTypes"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"path","targetId":"b4d54255-87d2-3109-b441-21279099d510","targetPort":"Path"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"name","targetId":"b4d54255-87d2-3109-b441-21279099d510","targetPort":"Name"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"sizeInBytes","targetId":"b4d54255-87d2-3109-b441-21279099d510","targetPort":"Size in bytes"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"type","targetId":"b4d54255-87d2-3109-b441-21279099d510","targetPort":"Type"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"success","targetId":"b4d54255-87d2-3109-b441-21279099d510","targetPort":"Success"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"file","targetId":"b4d54255-87d2-3109-b441-21279099d510","targetPort":"File"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"File","targetId":"867b8904-f197-bf9e-0803-6b1a970edc57","targetPort":"File"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"Path","targetId":"867b8904-f197-bf9e-0803-6b1a970edc57","targetPort":"Path"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"Name","targetId":"867b8904-f197-bf9e-0803-6b1a970edc57","targetPort":"Name"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"SizeInBytes","targetId":"867b8904-f197-bf9e-0803-6b1a970edc57","targetPort":"Size in bytes"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"Type","targetId":"867b8904-f197-bf9e-0803-6b1a970edc57","targetPort":"Type"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"Success","targetId":"867b8904-f197-bf9e-0803-6b1a970edc57","targetPort":"Success"},{"sourceId":"2bd660de-3d6c-0873-d9a5-5f401655827a","sourcePort":"Variant","targetId":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","targetPort":"variant"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"OnDragOver","targetId":"2bd660de-3d6c-0873-d9a5-5f401655827a","targetPort":"to-Hover"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"OnDragLeave","targetId":"2bd660de-3d6c-0873-d9a5-5f401655827a","targetPort":"to-Default"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"Success","targetId":"2bd660de-3d6c-0873-d9a5-5f401655827a","targetPort":"to-Default"},{"sourceId":"2bd660de-3d6c-0873-d9a5-5f401655827a","sourcePort":"BG Color","targetId":"5fc01a77-4752-dad2-0c70-d8368d2e10e7","targetPort":"backgroundColor"},{"sourceId":"2bd660de-3d6c-0873-d9a5-5f401655827a","sourcePort":"Text","targetId":"8d9962c3-5211-9019-37a4-542acf4d22d4","targetPort":"text"},{"sourceId":"2bd660de-3d6c-0873-d9a5-5f401655827a","sourcePort":"Text Color","targetId":"8d9962c3-5211-9019-37a4-542acf4d22d4","targetPort":"color"},{"sourceId":"0723806b-7b93-a93e-0e9d-b59288a5c5c3","sourcePort":"success","targetId":"2bd660de-3d6c-0873-d9a5-5f401655827a","targetPort":"to-Success"},{"sourceId":"2bd660de-3d6c-0873-d9a5-5f401655827a","sourcePort":"Text Color","targetId":"3ad41a1d-c5d2-09af-a7f0-5e4ff4d6f3c5","targetPort":"iconColor"},{"sourceId":"c35f9807-7235-dac9-581b-57670a9301d9","sourcePort":"Success","targetId":"2bd660de-3d6c-0873-d9a5-5f401655827a","targetPort":"to-Success"},{"sourceId":"ae839f0b-ae08-8936-8491-78454db28d67","sourcePort":"timerFinished","targetId":"2bd660de-3d6c-0873-d9a5-5f401655827a","targetPort":"to-Default"},{"sourceId":"2bd660de-3d6c-0873-d9a5-5f401655827a","sourcePort":"reached-Success","targetId":"ae839f0b-ae08-8936-8491-78454db28d67","targetPort":"start"}],"ports":[{"name":"File","type":{"name":"*"},"group":"General","plug":"output","index":0},{"name":"Enable File Picker on click","type":{"name":"boolean"},"default":true,"group":"Dropzone","plug":"input","index":0},{"name":"Path","type":{"name":"string"},"group":"Metadata","plug":"output","index":1},{"name":"Accepted file types","type":{"name":"string"},"default":"","group":"Dropzone","plug":"input","index":1},{"name":"Name","type":{"name":"string"},"group":"Metadata","plug":"output","index":2},{"name":"Open File Picker","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":2},{"name":"Size in bytes","type":{"name":"string"},"group":"Metadata","plug":"output","index":3},{"name":"To Default","type":"*","group":"Actions","plug":"input","index":3},{"name":"Type","type":{"name":"string"},"group":"Metadata","plug":"output","index":4},{"name":"Success","type":{"name":"signal"},"group":"Events","plug":"output","index":5}],"roots":["5fc01a77-4752-dad2-0c70-d8368d2e10e7"]},{"name":"/Popups/File Manager/Image Item","nodes":[{"id":"9e7b5c6b-a1f5-4ae6-1dbf-7b8259a7416e","type":"Group","parameters":{"sizeMode":"contentSize","rowGap":{"value":6,"unit":"px"},"paddingTop":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"paddingLeft":{"value":10,"unit":"px"},"paddingBottom":{"value":10,"unit":"px"}},"ports":[],"children":[{"id":"8d8534b4-0b4c-0c7e-af78-ec51443e00f6","type":"Group","parameters":{"position":"absolute","borderStyle":"solid","borderColor":"Primary Subtle","borderRadius":{"value":8,"unit":"px"}},"ports":[],"children":[]},{"id":"ee147225-f76e-efcb-b253-bc4ad9b91828","type":"Group","parameters":{"mounted":true,"rowGap":{"value":8,"unit":"px"},"maxWidth":{"value":125,"unit":"px"}},"ports":[],"children":[{"id":"6f57c249-f640-b1dd-10d3-bd52536828c7","type":"Group","parameters":{"minHeight":{"value":125,"unit":"px"}},"ports":[],"children":[{"id":"b5151e68-ff73-92e5-42e8-2712c1633bad","type":"Image","parameters":{"sizeMode":"explicit","width":{"value":125,"unit":"px"}},"ports":[],"children":[]},{"id":"d130962a-e877-c148-2343-8c578fb9a83f","type":"Group","parameters":{"position":"absolute","backgroundColor":"Danger","zIndex":9,"alignItems":"center","justifyContent":"center","rowGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"7ea6bfc0-24b5-13f0-f974-d6cb00c7e954","type":"Text","parameters":{"text":"Delete File?","color":"White","textStyle":"Label Medium","textAlignX":"center"},"ports":[],"children":[]},{"id":"4d5a3903-fb43-dc88-c216-b32d785a6e68","type":"net.noodl.controls.button","parameters":{"label":"Delete","backgroundColor":"White","paddingLeft":{"value":6,"unit":"px"},"paddingRight":{"value":6,"unit":"px"},"height":{"value":24,"unit":"px"},"color":"Danger","fontSize":{"value":12,"unit":"px"}},"ports":[],"children":[]},{"id":"7ab776e4-27a0-3ba1-cffb-df69d3891524","type":"Text","parameters":{"text":"Cancel","textStyle":"Label Small","color":"White","styleCss":"text-decoration: underline;\ncursor: pointer;","textAlignX":"center"},"ports":[],"children":[]}]},{"id":"78c83803-d071-158b-d546-c61888c16750","type":"Group","parameters":{"position":"absolute","backgroundColor":"#7575758E","alignItems":"center","justifyContent":"center","rowGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"198665fe-9050-9c2a-82ef-39815b042945","type":"net.noodl.controls.button","parameters":{"label":"Select","paddingLeft":{"value":6,"unit":"px"},"paddingRight":{"value":6,"unit":"px"},"height":{"value":24,"unit":"px"},"fontFamily":"assets/fonts/Montserrat/Montserrat-Medium.ttf"},"ports":[],"children":[]},{"id":"a5776e17-f776-4412-b3fe-beb680519b28","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentSize"},"ports":[],"children":[{"id":"88552a97-2bb5-1c4a-9474-cefa4602815b","type":"Group","parameters":{"styleCss":"cursor: pointer;","mounted":false},"ports":[],"children":[{"id":"9fe65a99-80b6-06c7-cc8d-9495786de015","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-edit","codeAsClass":true},"iconColor":"White"},"ports":[],"children":[]}]},{"id":"f46740d2-cdee-21fb-006c-31142f2cbe89","type":"Group","parameters":{"styleCss":"cursor: pointer;"},"ports":[],"children":[{"id":"6bed46fa-5844-d9b6-ff18-0fce402ff277","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"fa-solid","code":"fa-trash-can","codeAsClass":true},"iconColor":"Danger"},"ports":[],"children":[]}]}]}]}]},{"id":"ed3206d1-c5f9-ba8c-bda6-89f7a189b2ae","type":"Group","parameters":{},"ports":[],"children":[{"id":"ab7b6e73-9096-9df0-8e53-5630ccccf374","type":"Text","parameters":{},"ports":[],"children":[]}]}]}]},{"id":"885e6054-3162-53bf-1de2-227b50ea4777","type":"Model2","parameters":{"idSource":"foreach","properties":"name,signedUrl,metadata,current"},"ports":[],"children":[]},{"id":"933e9482-58d5-173f-94f7-3e2391154103","type":"JavaScriptFunction","parameters":{"functionScript":"const signedUrl = Inputs.SignedUrl;\nconst metadata = Inputs.Metadata;\n\nOutputs.Source = signedUrl.signedUrl;\nOutputs.Path = signedUrl.path;"},"ports":[{"name":"in-SignedUrl","displayName":"SignedUrl","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Metadata","displayName":"Metadata","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Source","displayName":"Source","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Path","displayName":"Path","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"bee474c5-36d7-143e-9823-94b300e355e5","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"067a968d-5eb1-0d7e-e2d6-ee8ac702ff09","type":"States","parameters":{},"ports":[],"children":[]},{"id":"b4267227-b5e4-e34d-8185-ae6b58cec66d","type":"States","parameters":{"states":"Default,Hover","values":"Visible","value-Default-Visible":0,"value-Hover-Visible":1},"ports":[],"children":[]},{"id":"88d0f178-531f-d5a1-aa39-2c67a43d80d6","type":"/API/Delete CV Image","parameters":{"Bucket":"resume_photos"},"ports":[],"children":[]},{"id":"f314dd63-03dd-53c3-0649-a4fb3780e011","type":"States","parameters":{"states":"Hidden,Visible"},"ports":[],"children":[]},{"id":"4a950048-31fa-834b-4ae2-3c1894142337","type":"Event Sender","parameters":{"channelName":"fileDeleted","propagation":"parent"},"ports":[],"children":[]}],"connections":[{"sourceId":"885e6054-3162-53bf-1de2-227b50ea4777","sourcePort":"prop-signedUrl","targetId":"933e9482-58d5-173f-94f7-3e2391154103","targetPort":"in-SignedUrl"},{"sourceId":"933e9482-58d5-173f-94f7-3e2391154103","sourcePort":"out-Source","targetId":"b5151e68-ff73-92e5-42e8-2712c1633bad","targetPort":"src"},{"sourceId":"885e6054-3162-53bf-1de2-227b50ea4777","sourcePort":"prop-name","targetId":"ab7b6e73-9096-9df0-8e53-5630ccccf374","targetPort":"text"},{"sourceId":"885e6054-3162-53bf-1de2-227b50ea4777","sourcePort":"id","targetId":"bee474c5-36d7-143e-9823-94b300e355e5","targetPort":"id"},{"sourceId":"885e6054-3162-53bf-1de2-227b50ea4777","sourcePort":"prop-name","targetId":"bee474c5-36d7-143e-9823-94b300e355e5","targetPort":"Name"},{"sourceId":"885e6054-3162-53bf-1de2-227b50ea4777","sourcePort":"prop-current","targetId":"8d8534b4-0b4c-0c7e-af78-ec51443e00f6","targetPort":"mounted"},{"sourceId":"885e6054-3162-53bf-1de2-227b50ea4777","sourcePort":"prop-signedUrl","targetId":"bee474c5-36d7-143e-9823-94b300e355e5","targetPort":"Signed URL"},{"sourceId":"9e7b5c6b-a1f5-4ae6-1dbf-7b8259a7416e","sourcePort":"hoverStart","targetId":"b4267227-b5e4-e34d-8185-ae6b58cec66d","targetPort":"to-Hover"},{"sourceId":"9e7b5c6b-a1f5-4ae6-1dbf-7b8259a7416e","sourcePort":"hoverEnd","targetId":"b4267227-b5e4-e34d-8185-ae6b58cec66d","targetPort":"to-Default"},{"sourceId":"b4267227-b5e4-e34d-8185-ae6b58cec66d","sourcePort":"Visible","targetId":"78c83803-d071-158b-d546-c61888c16750","targetPort":"mounted"},{"sourceId":"b4267227-b5e4-e34d-8185-ae6b58cec66d","sourcePort":"Visible","targetId":"78c83803-d071-158b-d546-c61888c16750","targetPort":"opacity"},{"sourceId":"198665fe-9050-9c2a-82ef-39815b042945","sourcePort":"onClick","targetId":"bee474c5-36d7-143e-9823-94b300e355e5","targetPort":"Select Image"},{"sourceId":"933e9482-58d5-173f-94f7-3e2391154103","sourcePort":"out-Path","targetId":"88d0f178-531f-d5a1-aa39-2c67a43d80d6","targetPort":"File Path"},{"sourceId":"f314dd63-03dd-53c3-0649-a4fb3780e011","sourcePort":"at-Visible","targetId":"d130962a-e877-c148-2343-8c578fb9a83f","targetPort":"mounted"},{"sourceId":"f46740d2-cdee-21fb-006c-31142f2cbe89","sourcePort":"onClick","targetId":"f314dd63-03dd-53c3-0649-a4fb3780e011","targetPort":"to-Visible"},{"sourceId":"7ab776e4-27a0-3ba1-cffb-df69d3891524","sourcePort":"onClick","targetId":"f314dd63-03dd-53c3-0649-a4fb3780e011","targetPort":"to-Hidden"},{"sourceId":"4d5a3903-fb43-dc88-c216-b32d785a6e68","sourcePort":"onClick","targetId":"88d0f178-531f-d5a1-aa39-2c67a43d80d6","targetPort":"Do"},{"sourceId":"88d0f178-531f-d5a1-aa39-2c67a43d80d6","sourcePort":"Success","targetId":"4a950048-31fa-834b-4ae2-3c1894142337","targetPort":"sendEvent"},{"sourceId":"9e7b5c6b-a1f5-4ae6-1dbf-7b8259a7416e","sourcePort":"focusLost","targetId":"f314dd63-03dd-53c3-0649-a4fb3780e011","targetPort":"to-Hidden"}],"ports":[{"name":"Select Image","type":"signal","plug":"output","index":1},{"name":"Name","type":{"name":"*","allowConnectionsOnly":true},"plug":"output","index":2},{"name":"id","type":"string","plug":"output","index":3},{"name":"Signed URL","type":{"name":"*","allowConnectionsOnly":true},"plug":"output","index":4}],"roots":["9e7b5c6b-a1f5-4ae6-1dbf-7b8259a7416e"]},{"name":"/API/Delete CV Image","nodes":[{"id":"7124b9dd-c3a8-a868-a981-9e47279d412d","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"3546cdf8-f59d-8c2d-8723-f927455d796a","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"817550fd-7aa9-d89a-c909-d8080d20e730","type":"JavaScriptFunction","parameters":{"functionScript":"const bucket = Inputs.Bucket;\nif (!bucket) throw new Error('No bucket provided');\n\nconst imagePath = Inputs.ImagePath || '';\nif (!imagePath) throw new Error('Invalid Image Path');\n\nOutputs.Path = imagePath;\n\ntry {\n  const { data, error } = await Noodl.Variables.supabase\n    .storage\n    .from('resume_photos')\n    .remove([ imagePath ])\n\n  if (error) throw error;\n\n  Outputs.Success();\n} catch (error) {\n  Outputs.error = error.message;\n  Outputs.Failure();\n}\n","scriptInputs":[{"id":"c9wm","label":"ImagePath"},{"id":"e470","label":"Bucket"}],"intype-Bucket":"string"},"ports":[{"name":"intype-ImagePath","displayName":"Type","editorName":"ImagePath | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"c9wm","index":4},{"name":"in-ImagePath","displayName":"ImagePath","plug":"input","type":"string","group":"Inputs","index":5},{"name":"intype-Bucket","displayName":"Type","editorName":"Bucket | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"e470","index":6},{"name":"in-Bucket","displayName":"Bucket","plug":"input","type":"string","group":"Inputs","index":7},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Path","displayName":"Path","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":11}],"children":[]}],"connections":[{"sourceId":"7124b9dd-c3a8-a868-a981-9e47279d412d","sourcePort":"File Path","targetId":"817550fd-7aa9-d89a-c909-d8080d20e730","targetPort":"in-ImagePath"},{"sourceId":"7124b9dd-c3a8-a868-a981-9e47279d412d","sourcePort":"Do","targetId":"817550fd-7aa9-d89a-c909-d8080d20e730","targetPort":"run"},{"sourceId":"817550fd-7aa9-d89a-c909-d8080d20e730","sourcePort":"out-Success","targetId":"3546cdf8-f59d-8c2d-8723-f927455d796a","targetPort":"Success"},{"sourceId":"817550fd-7aa9-d89a-c909-d8080d20e730","sourcePort":"out-Failure","targetId":"3546cdf8-f59d-8c2d-8723-f927455d796a","targetPort":"Failure"},{"sourceId":"817550fd-7aa9-d89a-c909-d8080d20e730","sourcePort":"out-error","targetId":"3546cdf8-f59d-8c2d-8723-f927455d796a","targetPort":"Error Message"},{"sourceId":"7124b9dd-c3a8-a868-a981-9e47279d412d","sourcePort":"Bucket","targetId":"817550fd-7aa9-d89a-c909-d8080d20e730","targetPort":"in-Bucket"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"Bucket","type":"string","group":"Inputs","plug":"input","index":1},{"name":"Error Message","type":"*","plug":"output","index":2},{"name":"File Path","type":"string","group":"Inputs","plug":"input","index":2}],"roots":[]},{"name":"/API/Insert Photo Into Storage","nodes":[{"id":"4781c338-b981-8705-1ecb-53ade1a0135b","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"5660e0eb-0feb-fbd8-00c1-f4e597dd8dea","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"83170764-1e9d-fc3d-7826-4798c225208b","type":"JavaScriptFunction","parameters":{"functionScript":"const supabase = Noodl.Variables.supabase;\nconst file = Inputs.File || null;\nconst userId = Inputs.UserID\nconst bucket = 'resume_photos';\n\nif (!file) throw new Error('No file provided');\n\ntry {\n  const { data, error } = await supabase.storage\n    .from(bucket)\n    .upload(userId + '/' + file.name, file);\n\n  if (error) throw error;\n\n  Outputs.FileUrl = data.Key;\n  Outputs.Success();\n} catch (error) {\n  Outputs.Error = error.message;\n  Outputs.Failure();\n}\n"},"ports":[{"name":"in-File","displayName":"File","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-UserID","displayName":"UserID","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-FileUrl","displayName":"FileUrl","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-Error","displayName":"Error","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"a49e3205-0f3c-8ede-4aa2-96025b394865","type":"Model2","parameters":{"modelId":"currentUser","properties":"auth"},"ports":[],"children":[]},{"id":"e5ab3b96-f5c5-e046-f02d-adf8404de218","type":"Expression","parameters":{"expression":"auth.id"},"ports":[],"children":[]}],"connections":[{"sourceId":"4781c338-b981-8705-1ecb-53ade1a0135b","sourcePort":"Do","targetId":"83170764-1e9d-fc3d-7826-4798c225208b","targetPort":"run"},{"sourceId":"4781c338-b981-8705-1ecb-53ade1a0135b","sourcePort":"File","targetId":"83170764-1e9d-fc3d-7826-4798c225208b","targetPort":"in-File"},{"sourceId":"83170764-1e9d-fc3d-7826-4798c225208b","sourcePort":"out-Success","targetId":"5660e0eb-0feb-fbd8-00c1-f4e597dd8dea","targetPort":"Success"},{"sourceId":"83170764-1e9d-fc3d-7826-4798c225208b","sourcePort":"out-Failure","targetId":"5660e0eb-0feb-fbd8-00c1-f4e597dd8dea","targetPort":"Failure"},{"sourceId":"a49e3205-0f3c-8ede-4aa2-96025b394865","sourcePort":"prop-auth","targetId":"e5ab3b96-f5c5-e046-f02d-adf8404de218","targetPort":"auth"},{"sourceId":"e5ab3b96-f5c5-e046-f02d-adf8404de218","sourcePort":"result","targetId":"83170764-1e9d-fc3d-7826-4798c225208b","targetPort":"in-UserID"},{"sourceId":"83170764-1e9d-fc3d-7826-4798c225208b","sourcePort":"out-FileUrl","targetId":"5660e0eb-0feb-fbd8-00c1-f4e597dd8dea","targetPort":"File Path"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"File","type":"*","group":"Inputs","plug":"input","index":1},{"name":"File Path","type":"*","plug":"output","index":2}],"roots":[]}]