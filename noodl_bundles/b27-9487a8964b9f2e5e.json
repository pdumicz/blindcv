[{"name":"/New CV Flow","nodes":[{"id":"db61c6d3-cd43-1aba-fc2e-71db8f249b03","type":"Page","parameters":{"urlPath":"new"},"ports":[],"children":[{"id":"deb0b933-b94f-3c3c-edea-dfbd883707bd","type":"Group","parameters":{},"ports":[],"children":[{"id":"ce68113d-9f0d-7f14-a6ae-d207f2806bfe","type":"Group","parameters":{"backgroundColor":"Primary Light","flexDirection":"row","sizeMode":"contentHeight","justifyContent":"center","columnGap":{"value":15,"unit":"px"},"alignItems":"center","paddingTop":{"value":25,"unit":"px"},"paddingBottom":{"value":15,"unit":"px"}},"ports":[],"children":[{"id":"04f8f049-9b71-658e-710f-b2b37eb5d573","type":"/User Flow Components/Signup/Step Label","parameters":{"Default Text Color":"Primary","Border Color":"Primary","Active Text Color":"White","Step Active":true,"Fill Color":"Primary","Step Label":"Upload a CV"},"ports":[],"children":[]},{"id":"189ec7df-faba-8c3c-ac0c-1595f6e62af2","type":"Group","parameters":{"height":{"value":1,"unit":"px"},"width":{"value":20,"unit":"px"},"backgroundColor":"Light Gray"},"ports":[],"children":[]},{"id":"11186f14-c837-0c12-e399-517ba0ec3b36","type":"/User Flow Components/Signup/Step Label","parameters":{"Default Text Color":"Primary","Border Color":"Primary","Active Text Color":"White","Step Active":true,"Fill Color":"Primary","Step Number":"2"},"ports":[],"children":[]},{"id":"790e9c44-f8c7-e193-e96b-9bc1aac71ad5","type":"Group","parameters":{"height":{"value":1,"unit":"px"},"width":{"value":20,"unit":"px"},"backgroundColor":"Light Gray"},"ports":[],"children":[]},{"id":"26219ec5-88e4-4106-8ffb-b7be29cab02e","type":"/User Flow Components/Signup/Step Label","parameters":{"Step Number":"3","Step Label":"Preview CV","Border Color":"Primary","Fill Color":"Primary","Active Text Color":"White","Default Text Color":"Primary"},"ports":[],"children":[]}]},{"id":"79fbc357-c929-dcee-ab1f-bc9716006a4f","type":"Page Stack","parameters":{"pages":[{"id":"q7eb","label":"Step 2 - Template Picker"},{"id":"csrl","label":"Step 3 - Preview CV"},{"id":"4j6a","label":"Step 1 - Upload a File"}],"pageComp-q7eb":"/User Flow Components/Logged In/Template Picker","pageComp-e4mv":"/Auth/Sign up copy/Select Provider","pageComp-xtdl":"/New CV Flow/Email Signup","pageComp-4j6a":"/User Flow Components/Logged In/Upload File","startPage":"4j6a","pageComp-csrl":"/User Flow Components/Logged In/PDF Preview","name":"New CV Flow","useRoutes":false,"mounted":true},"ports":[],"children":[]}]}]},{"id":"b1280c32-8c48-787a-ab13-94d334b26551","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"70071b55-fb1b-56af-a81a-d8bb51f193b4","type":"net.noodl.ComponentObject","parameters":{"properties":"New CV ID"},"ports":[],"children":[]},{"id":"0493361e-fee1-3a60-6726-7f7970a9b9ab","type":"States","parameters":{"values":"Step 1 Active,Step 2 Active,Step 3 Active","states":"Step 1 - Upload a File,Step 2 - Template Picker,Step 3 - Preview CV","useTransitions":true,"type-Step 1 Active":"boolean","type-Step 2 Active":"boolean","type-Step 3 Active":"boolean","value-Step 4 - Provider-Step 1 Active":true,"value-Step 4 - Provider-Step 2 Active":true,"value-Step 4 - Provider-Step 3 Active":true,"value-Step 4b - Email/Password-Step 1 Active":true,"value-Step 4b - Email/Password-Step 2 Active":true,"value-Step 4b - Email/Password-Step 3 Active":true,"type-Step 4 Active":"boolean","value-Step 4b - Email/Password-Step 4 Active":true,"value-Step 4 - Provider-Step 4 Active":true,"value-Step 3 - Preview CV-Step 1 Active":true,"value-Step 3 - Preview CV-Step 2 Active":true,"value-Step 3 - Preview CV-Step 3 Active":true,"value-Step 3 - Preview CV-Step 4 Active":false,"value-Step 1 - Upload a File-Step 1 Active":true,"value-Step 1 - Upload a File-Step 2 Active":false,"value-Step 2 - Template Picker-Step 1 Active":true,"value-Step 2 - Template Picker-Step 2 Active":true,"value-Step 2 - Template Picker-Step 3 Active":false},"ports":[],"children":[]},{"id":"d9cc27b2-7d34-422c-0c4e-e180f1b2093e","type":"NewModel","parameters":{},"ports":[],"children":[]},{"id":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","type":"Model2","parameters":{"properties":"email,password,firstName,lastName,organization,File,template,jobDescription,logoFile,watermarkFile,anonymise,logoPath,watermarkPath"},"ports":[],"children":[]},{"id":"9cb824f9-daa1-207a-857e-06975027286e","type":"SetModelProperties","parameters":{"properties":"Resume ID"},"ports":[],"children":[]},{"id":"2897d4b1-9fb3-bc07-8b7f-87d9dc70c6b4","type":"Event Receiver","parameters":{"channelName":"HandleCV","consume":"always"},"ports":[],"children":[]},{"id":"a9fb69e9-f7dd-73f9-e8f9-fe26a30e6489","type":"PageStackNavigate","parameters":{"target":"csrl","tr-shift":{"value":100,"unit":"%"},"tr-crossfade":true,"tr-darkoverlay":false,"tr-timing":{"curve":[0.42,0,0.58,1],"dur":300,"delay":0},"stack":"New CV Flow"},"ports":[],"children":[]},{"id":"2d35e185-f250-2250-4b49-9d9b7c40b2c5","type":"/Show Toast","parameters":{"Type":"Error","Message":"There was an error processing your document. Please try again. If the problem persists, please contact support."},"ports":[],"children":[]},{"id":"b0c32553-acbe-8650-e997-67865ee867de","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.File;\nconst template = Inputs.Template;\n\nif (!file) {\n    Outputs.Error = 'No file provided.'\n    Outputs.Failure()\n    return\n}\n\nif (!template) {\n    Outputs.Error = 'No template selected.'\n    Outputs.Failure()\n    return\n}\n\nOutputs.Success()"},"ports":[{"name":"in-File","displayName":"File","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Template","displayName":"Template","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Error","displayName":"Error","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"c49f61aa-ff57-3327-6348-858c173ab63f","type":"/Show Toast","parameters":{"Type":"Error"},"ports":[],"children":[]},{"id":"e477feb1-9044-6c20-b999-7c77e247ad81","type":"/API/Handle CV","parameters":{},"ports":[],"children":[]},{"id":"004e0057-7edd-960b-ec48-c59d2a9eb6be","type":"JavaScriptFunction","parameters":{"functionScript":"const supabase = Noodl.Variables.supabase;\nconst logoFile = Inputs.LogoFile || null;\nconst watermarkFile = Inputs.WatermarkFile || null;\nconst userId = Inputs.UserID;\nconst bucket = 'resume_photos';\n\n// Check if both files are not provided\nif (!logoFile && !watermarkFile) {\n  Outputs.HandleCV();\n  return;\n}\n\n// Function to upload file to Supabase\nconst uploadFile = async (file) => {\n  try {\n    const { data, error } = await supabase.storage\n      .from(bucket)\n      .upload(userId + '/' + file.name, file);\n\n    if (error) throw error;\n\n    return data.Key;\n  } catch (error) {\n    Outputs.Error = error.message;\n    Outputs.Failure();\n  }\n}\n\n// Upload logo file if provided\nif (logoFile) {\n  const logoPath = await uploadFile(logoFile);\n  Outputs.LogoPath = logoPath;\n}\n\n// Upload watermark file if provided\nif (watermarkFile) {\n  const watermarkPath = await uploadFile(watermarkFile);\n  Outputs.WatermarkPath = watermarkPath;\n}\n\nOutputs.Success();\n"},"ports":[{"name":"in-LogoFile","displayName":"LogoFile","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-WatermarkFile","displayName":"WatermarkFile","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-UserID","displayName":"UserID","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-HandleCV","displayName":"HandleCV","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Error","displayName":"Error","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-LogoPath","displayName":"LogoPath","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-WatermarkPath","displayName":"WatermarkPath","plug":"output","type":"*","group":"Outputs","index":12}],"children":[]},{"id":"c27ac338-cc27-76b0-a6b8-ee0ae4819808","type":"Expression","parameters":{"expression":"!!description"},"ports":[],"children":[]},{"id":"3d42fe50-d6de-c316-02a2-10dc1532bd1d","type":"/Loading Spinner","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"79fbc357-c929-dcee-ab1f-bc9716006a4f","sourcePort":"topPageName","targetId":"0493361e-fee1-3a60-6726-7f7970a9b9ab","targetPort":"currentState"},{"sourceId":"d9cc27b2-7d34-422c-0c4e-e180f1b2093e","sourcePort":"id","targetId":"70071b55-fb1b-56af-a81a-d8bb51f193b4","targetPort":"value-New CV ID"},{"sourceId":"d9cc27b2-7d34-422c-0c4e-e180f1b2093e","sourcePort":"id","targetId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","targetPort":"modelId"},{"sourceId":"0493361e-fee1-3a60-6726-7f7970a9b9ab","sourcePort":"Step 1 Active","targetId":"04f8f049-9b71-658e-710f-b2b37eb5d573","targetPort":"Step Active"},{"sourceId":"0493361e-fee1-3a60-6726-7f7970a9b9ab","sourcePort":"Step 2 Active","targetId":"11186f14-c837-0c12-e399-517ba0ec3b36","targetPort":"Step Active"},{"sourceId":"0493361e-fee1-3a60-6726-7f7970a9b9ab","sourcePort":"Step 3 Active","targetId":"26219ec5-88e4-4106-8ffb-b7be29cab02e","targetPort":"Step Active"},{"sourceId":"db61c6d3-cd43-1aba-fc2e-71db8f249b03","sourcePort":"didMount","targetId":"d9cc27b2-7d34-422c-0c4e-e180f1b2093e","targetPort":"new"},{"sourceId":"d9cc27b2-7d34-422c-0c4e-e180f1b2093e","sourcePort":"id","targetId":"9cb824f9-daa1-207a-857e-06975027286e","targetPort":"modelId"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-File","targetId":"b0c32553-acbe-8650-e997-67865ee867de","targetPort":"in-File"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-template","targetId":"b0c32553-acbe-8650-e997-67865ee867de","targetPort":"in-Template"},{"sourceId":"2897d4b1-9fb3-bc07-8b7f-87d9dc70c6b4","sourcePort":"eventReceived","targetId":"b0c32553-acbe-8650-e997-67865ee867de","targetPort":"run"},{"sourceId":"b0c32553-acbe-8650-e997-67865ee867de","sourcePort":"out-Failure","targetId":"c49f61aa-ff57-3327-6348-858c173ab63f","targetPort":"Do"},{"sourceId":"b0c32553-acbe-8650-e997-67865ee867de","sourcePort":"out-Error","targetId":"c49f61aa-ff57-3327-6348-858c173ab63f","targetPort":"Message"},{"sourceId":"c27ac338-cc27-76b0-a6b8-ee0ae4819808","sourcePort":"result","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Internal Assessment"},{"sourceId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","sourcePort":"out-HandleCV","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Do"},{"sourceId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","sourcePort":"out-LogoPath","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Logo Path"},{"sourceId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","sourcePort":"out-WatermarkPath","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Watermark Path"},{"sourceId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","sourcePort":"out-Success","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Do"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-jobDescription","targetId":"c27ac338-cc27-76b0-a6b8-ee0ae4819808","targetPort":"description"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-jobDescription","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Job Description"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-logoFile","targetId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","targetPort":"in-LogoFile"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-watermarkFile","targetId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","targetPort":"in-WatermarkFile"},{"sourceId":"b0c32553-acbe-8650-e997-67865ee867de","sourcePort":"out-Success","targetId":"004e0057-7edd-960b-ec48-c59d2a9eb6be","targetPort":"run"},{"sourceId":"e477feb1-9044-6c20-b999-7c77e247ad81","sourcePort":"Success","targetId":"a9fb69e9-f7dd-73f9-e8f9-fe26a30e6489","targetPort":"navigate"},{"sourceId":"e477feb1-9044-6c20-b999-7c77e247ad81","sourcePort":"Success","targetId":"9cb824f9-daa1-207a-857e-06975027286e","targetPort":"store"},{"sourceId":"e477feb1-9044-6c20-b999-7c77e247ad81","sourcePort":"Resume ID","targetId":"9cb824f9-daa1-207a-857e-06975027286e","targetPort":"prop-Resume ID"},{"sourceId":"e477feb1-9044-6c20-b999-7c77e247ad81","sourcePort":"Failure","targetId":"2d35e185-f250-2250-4b49-9d9b7c40b2c5","targetPort":"Do"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-anonymise","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Anonymised"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-File","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"File"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-logoPath","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Logo Path"},{"sourceId":"6394fe8f-76b1-ea4d-713e-6f4d118168e8","sourcePort":"prop-watermarkPath","targetId":"e477feb1-9044-6c20-b999-7c77e247ad81","targetPort":"Watermark Path"},{"sourceId":"2897d4b1-9fb3-bc07-8b7f-87d9dc70c6b4","sourcePort":"eventReceived","targetId":"3d42fe50-d6de-c316-02a2-10dc1532bd1d","targetPort":"Show"},{"sourceId":"e477feb1-9044-6c20-b999-7c77e247ad81","sourcePort":"Success","targetId":"3d42fe50-d6de-c316-02a2-10dc1532bd1d","targetPort":"Hide"},{"sourceId":"b0c32553-acbe-8650-e997-67865ee867de","sourcePort":"out-Failure","targetId":"3d42fe50-d6de-c316-02a2-10dc1532bd1d","targetPort":"Hide"},{"sourceId":"e477feb1-9044-6c20-b999-7c77e247ad81","sourcePort":"Failure","targetId":"3d42fe50-d6de-c316-02a2-10dc1532bd1d","targetPort":"Hide"}],"ports":[],"roots":["db61c6d3-cd43-1aba-fc2e-71db8f249b03"]}]