[{"name":"/Auth/Log in","nodes":[{"id":"009240ea-30ea-6ee4-bbb9-13debd869390","type":"Page","parameters":{"urlPath":"login"},"ports":[],"children":[{"id":"b653f3d5-28b6-68c1-2d5f-56e50fd47b03","type":"Group","parameters":{"alignItems":"center","styleCss":"padding-top: 14vh;","paddingLeft":{"value":30,"unit":"px"},"paddingRight":{"value":30,"unit":"px"}},"ports":[],"children":[{"id":"08171dd9-201b-5f4b-4f41-636f3c1152b1","type":"Group","parameters":{"rowGap":{"value":32,"unit":"px"},"maxWidth":{"value":500,"unit":"px"},"sizeMode":"contentHeight"},"ports":[],"children":[{"id":"7caff1fe-b2f6-ac1b-c313-8013a6973767","type":"Group","parameters":{"flexDirection":"column","borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentHeight","clip":true,"rowGap":{"value":15,"unit":"px"}},"ports":[],"children":[{"id":"fca77d0b-8b34-f1ad-8765-b95dc8c2206c","type":"Text","parameters":{"text":"Login","marginBottom":{"value":16,"unit":"px"},"textStyle":"Headline"},"ports":[],"children":[]},{"id":"89214e1f-c366-310a-bd94-39f009c87d20","type":"net.noodl.controls.textinput","variant":"Primary Input","parameters":{"label":"Email","type":"email","marginBottom":{"value":8,"unit":"px"}},"ports":[],"children":[]},{"id":"eeb30885-8210-34c8-3626-78b9594c715f","type":"Group","parameters":{},"ports":[],"children":[{"id":"f5ad8c7f-57f2-7bd6-bda7-3bcc1a615b23","type":"net.noodl.controls.textinput","variant":"Primary Input","parameters":{"label":"Password","placeholder":"","marginBottom":{"value":8,"unit":"px"},"type":"password"},"ports":[],"children":[]},{"id":"9f028e86-a825-0a1b-216e-62aa8a21f453","type":"Text","parameters":{"text":"Forgot Password?","styleCss":"text-decoration: underline;\ncursor: pointer;","fontSize":{"value":14,"unit":"px"},"textAlignX":"right","position":"absolute","transformY":{"value":-4,"unit":"px"}},"stateParameters":{"hover":{"color":"Primary Dark"}},"ports":[],"children":[]}]},{"id":"520b3047-2d0c-ab8b-97ab-2960ff81d36c","type":"net.noodl.controls.button","parameters":{"label":"Log in"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]},{"id":"f100978a-efab-cabf-c6ce-e37369d243dc","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentHeight","alignItems":"center","marginTop":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"34981ab4-01ca-3872-e654-a54bcd8f97ab","type":"Text","parameters":{"text":"Don't have an account?","sizeMode":"contentSize","marginTop":{"value":0,"unit":"px"},"color":"Grey - 600"},"ports":[],"children":[]},{"id":"dbf7d9cb-ec59-4642-5eb2-967bbfd57ec0","type":"Text","parameters":{"textStyle":"Body Medium","fontFamily":"assets/fonts/Poppins/Poppins-Bold.ttf","text":"Sign up","sizeMode":"contentSize","styleCss":"cursor: pointer;"},"ports":[],"children":[]}]}]},{"id":"8e106401-d04b-956e-0c78-cc77c1caa02c","type":"Group","parameters":{"rowGap":{"value":8,"unit":"px"},"mounted":false},"ports":[],"children":[{"id":"400ef06c-105f-08df-94c6-117004772bd2","type":"Text","parameters":{"textStyle":"Title Medium","text":"Resend confirmation"},"ports":[],"children":[]},{"id":"e219d933-746a-dc56-aee6-0125b315ef2a","type":"Text","parameters":{"text":"It looks like you've signed up but haven't confirmed your email address. Should we resend you a confirmation email?","color":"Grey - 600"},"ports":[],"children":[]},{"id":"c446e191-7671-b895-e196-4858be82faeb","type":"net.noodl.controls.button","parameters":{"label":"Resend","marginTop":{"value":32,"unit":"px"}},"ports":[],"children":[]}]},{"id":"d1a59764-e218-b220-92ea-462b1e99e75a","type":"Group","parameters":{"rowGap":{"value":8,"unit":"px"},"mounted":false},"ports":[],"children":[{"id":"76067e38-1c2c-9cbf-2d50-36d0968959b2","type":"Text","parameters":{"textStyle":"Title Medium","text":"Invalid credentials"},"ports":[],"children":[]},{"id":"7c48398b-e695-2279-e614-8b5dcbc52914","type":"Text","parameters":{"text":"Provided incorrect email or password","color":"Grey - 600"},"ports":[],"children":[]},{"id":"bf942dde-634f-a8e7-64e4-420499a86c23","type":"net.noodl.controls.button","parameters":{"label":"Retry","marginTop":{"value":32,"unit":"px"}},"ports":[],"children":[]}]}]}]}]},{"id":"f40cbe02-052d-9aa3-4714-92fb2d291c27","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"b4cfcd78-b1ae-12dd-431f-a0f2bd6f5564","type":"RouterNavigate","parameters":{"router":"Main"},"ports":[],"children":[]},{"id":"e1dc060e-c725-9208-56a2-77390d77dd4c","type":"/API/User/Supabase - Log In","parameters":{},"ports":[],"children":[]},{"id":"4e938e3a-1337-acf6-6297-44f4b71652bf","type":"/API/User/Supabase - Resend Confirmation","parameters":{},"ports":[],"children":[]},{"id":"6b0724a2-438e-a4eb-1824-72e649843368","type":"/API/User/Supabase - Fetch Current User Auth","parameters":{"Loggin In ?":true},"ports":[],"children":[]},{"id":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","type":"States","parameters":{"states":"400,402,401,200","values":"Confirm email group visibility,Login form group visibility,Invalid Credentials Group Visibility","type-Confirm email group visibility":"boolean","type-Login form group visibility":"boolean","useTransitions":false,"value-400-Login form group visibility":false,"value-401-Login form group visibility":false,"value-402-Confirm email group visibility":true,"value-402-Login form group visibility":false,"type-Invalid Credentials Group Visibility":"boolean","value-401-Invalid Credentials Group Visibility":true,"value-200-Login form group visibility":true,"value-400-Invalid Credentials Group Visibility":true,"currentState":"200"},"ports":[],"children":[]},{"id":"a4688236-3d53-55bb-fc03-390b26400f13","type":"Expression","parameters":{"expression":"error == \"400\""},"ports":[],"children":[]},{"id":"7ebfec76-5ee7-184a-d2bc-334bdaee90c7","type":"Expression","parameters":{"expression":"error == \"401\""},"ports":[],"children":[]},{"id":"a49d95b9-4220-81e4-9dd0-c5cfa22ecc00","type":"Expression","parameters":{"expression":"error == \"402\""},"ports":[],"children":[]},{"id":"2d3e389e-e569-9def-459a-5ba9b2aec061","type":"/API/User/Supabase - Fetch Current User Profile Data","parameters":{},"ports":[],"children":[]},{"id":"14cecf30-a3ef-3c99-a260-1a2cc78905d7","type":"/API/User/Supabase - Update Current User Profile Data","parameters":{},"ports":[],"children":[]},{"id":"acaaa8c7-c4ec-ee77-a62f-514919cd3ad0","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.data = {id:Noodl.Objects.currentUser.auth.id}\nOutputs.Done()"},"ports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"46ef320d-af7c-4f7c-4072-d2141601a9bd","type":"RouterNavigate","parameters":{"router":"Main","target":"/Main"},"ports":[],"children":[]},{"id":"91b4abf1-96a8-462a-2ba9-d6d39659b276","type":"RouterNavigate","parameters":{"router":"Auth","target":"/Auth/Reset password"},"ports":[],"children":[]}],"connections":[{"sourceId":"520b3047-2d0c-ab8b-97ab-2960ff81d36c","sourcePort":"onClick","targetId":"e1dc060e-c725-9208-56a2-77390d77dd4c","targetPort":"Do"},{"sourceId":"c446e191-7671-b895-e196-4858be82faeb","sourcePort":"onClick","targetId":"4e938e3a-1337-acf6-6297-44f4b71652bf","targetPort":"Do"},{"sourceId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","sourcePort":"Login form group visibility","targetId":"7caff1fe-b2f6-ac1b-c313-8013a6973767","targetPort":"mounted"},{"sourceId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","sourcePort":"Confirm email group visibility","targetId":"8e106401-d04b-956e-0c78-cc77c1caa02c","targetPort":"mounted"},{"sourceId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","sourcePort":"Invalid Credentials Group Visibility","targetId":"d1a59764-e218-b220-92ea-462b1e99e75a","targetPort":"mounted"},{"sourceId":"bf942dde-634f-a8e7-64e4-420499a86c23","sourcePort":"onClick","targetId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","targetPort":"to-200"},{"sourceId":"a4688236-3d53-55bb-fc03-390b26400f13","sourcePort":"isTrueEv","targetId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","targetPort":"to-400"},{"sourceId":"7ebfec76-5ee7-184a-d2bc-334bdaee90c7","sourcePort":"isTrueEv","targetId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","targetPort":"to-401"},{"sourceId":"a49d95b9-4220-81e4-9dd0-c5cfa22ecc00","sourcePort":"isTrueEv","targetId":"11f5f4ae-3796-6d75-f849-6e75901cd9d8","targetPort":"to-402"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Failure","targetId":"a4688236-3d53-55bb-fc03-390b26400f13","targetPort":"run"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Failure","targetId":"7ebfec76-5ee7-184a-d2bc-334bdaee90c7","targetPort":"run"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Failure","targetId":"a49d95b9-4220-81e4-9dd0-c5cfa22ecc00","targetPort":"run"},{"sourceId":"acaaa8c7-c4ec-ee77-a62f-514919cd3ad0","sourcePort":"out-Done","targetId":"14cecf30-a3ef-3c99-a260-1a2cc78905d7","targetPort":"Do"},{"sourceId":"89214e1f-c366-310a-bd94-39f009c87d20","sourcePort":"onTextChanged","targetId":"e1dc060e-c725-9208-56a2-77390d77dd4c","targetPort":"Email"},{"sourceId":"f5ad8c7f-57f2-7bd6-bda7-3bcc1a615b23","sourcePort":"onTextChanged","targetId":"e1dc060e-c725-9208-56a2-77390d77dd4c","targetPort":"Password"},{"sourceId":"89214e1f-c366-310a-bd94-39f009c87d20","sourcePort":"onTextChanged","targetId":"4e938e3a-1337-acf6-6297-44f4b71652bf","targetPort":"Email"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Error","targetId":"a4688236-3d53-55bb-fc03-390b26400f13","targetPort":"error"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Error","targetId":"7ebfec76-5ee7-184a-d2bc-334bdaee90c7","targetPort":"error"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Error","targetId":"a49d95b9-4220-81e4-9dd0-c5cfa22ecc00","targetPort":"error"},{"sourceId":"e1dc060e-c725-9208-56a2-77390d77dd4c","sourcePort":"Success","targetId":"6b0724a2-438e-a4eb-1824-72e649843368","targetPort":"Do"},{"sourceId":"2d3e389e-e569-9def-459a-5ba9b2aec061","sourcePort":"No User Data","targetId":"acaaa8c7-c4ec-ee77-a62f-514919cd3ad0","targetPort":"run"},{"sourceId":"acaaa8c7-c4ec-ee77-a62f-514919cd3ad0","sourcePort":"out-data","targetId":"14cecf30-a3ef-3c99-a260-1a2cc78905d7","targetPort":"Data"},{"sourceId":"6b0724a2-438e-a4eb-1824-72e649843368","sourcePort":"Done","targetId":"2d3e389e-e569-9def-459a-5ba9b2aec061","targetPort":"Do"},{"sourceId":"2d3e389e-e569-9def-459a-5ba9b2aec061","sourcePort":"Success","targetId":"46ef320d-af7c-4f7c-4072-d2141601a9bd","targetPort":"navigate"},{"sourceId":"14cecf30-a3ef-3c99-a260-1a2cc78905d7","sourcePort":"Success","targetId":"46ef320d-af7c-4f7c-4072-d2141601a9bd","targetPort":"navigate"},{"sourceId":"dbf7d9cb-ec59-4642-5eb2-967bbfd57ec0","sourcePort":"onClick","targetId":"b4cfcd78-b1ae-12dd-431f-a0f2bd6f5564","targetPort":"navigate"},{"sourceId":"f5ad8c7f-57f2-7bd6-bda7-3bcc1a615b23","sourcePort":"onEnter","targetId":"e1dc060e-c725-9208-56a2-77390d77dd4c","targetPort":"Do"},{"sourceId":"9f028e86-a825-0a1b-216e-62aa8a21f453","sourcePort":"onClick","targetId":"91b4abf1-96a8-462a-2ba9-d6d39659b276","targetPort":"navigate"}],"ports":[],"roots":["009240ea-30ea-6ee4-bbb9-13debd869390"]},{"name":"/API/User/Supabase - Log In","nodes":[{"id":"9ca8b530-7332-9419-a9aa-f90df05d1658","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"4b278806-bc47-c95b-a876-b619b5787c3e","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"7a2502f0-667f-b264-4684-2d09f242fb7d","type":"JavaScriptFunction","parameters":{"functionScript":"//console.clear()\n\nif (!Boolean(Noodl.Variables.supabase)){\n    console.error(\"Supabase client not initialized\")\n    return\n}\n\nlet { data, error } = await Noodl.Variables.supabase.auth.signInWithPassword({\n  email: Inputs.email,\n  password: Inputs.password,\n})\n\nif (error) {\n\n  Noodl.Objects.currentUser.loggedIn = false\n\n  switch (error.message) {\n    case \"Invalid login credentials\":\n      Outputs.error = \"401\"\n      break;\n    case \"Email not confirmed\":\n      Outputs.error = \"402\"\n      break;\n    default:\n      Outputs.error = \"400\"\n\n  }\n  console.error(\"[log in] error: \", error)\n  Outputs.Failure()\n\n} else {\n\n  Outputs.data = data\n  Outputs.error = \"200\"\n  Noodl.Objects.currentUser.loggedIn = true\n  Noodl.Objects.currentUser.auth = data.user\n  Noodl.Objects.currentUser.session = data.session\n  //data.session.user.sbid = data.session.user.id\n  //Noodl.Objects.currentUser.setAll(data)\n\n  Outputs.Success()\n\n}"},"ports":[{"name":"in-email","displayName":"email","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-password","displayName":"password","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-error","displayName":"error","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-data","displayName":"data","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"eb93d4f1-4374-7972-08ad-0e20efeaead7","type":"Event Sender","parameters":{"channelName":"Supabase User Logged In"},"ports":[],"children":[]}],"connections":[{"sourceId":"9ca8b530-7332-9419-a9aa-f90df05d1658","sourcePort":"Do","targetId":"7a2502f0-667f-b264-4684-2d09f242fb7d","targetPort":"run"},{"sourceId":"9ca8b530-7332-9419-a9aa-f90df05d1658","sourcePort":"Email","targetId":"7a2502f0-667f-b264-4684-2d09f242fb7d","targetPort":"in-email"},{"sourceId":"9ca8b530-7332-9419-a9aa-f90df05d1658","sourcePort":"Password","targetId":"7a2502f0-667f-b264-4684-2d09f242fb7d","targetPort":"in-password"},{"sourceId":"7a2502f0-667f-b264-4684-2d09f242fb7d","sourcePort":"out-Failure","targetId":"4b278806-bc47-c95b-a876-b619b5787c3e","targetPort":"Failure"},{"sourceId":"7a2502f0-667f-b264-4684-2d09f242fb7d","sourcePort":"out-error","targetId":"4b278806-bc47-c95b-a876-b619b5787c3e","targetPort":"Error"},{"sourceId":"7a2502f0-667f-b264-4684-2d09f242fb7d","sourcePort":"out-Success","targetId":"4b278806-bc47-c95b-a876-b619b5787c3e","targetPort":"Success"},{"sourceId":"7a2502f0-667f-b264-4684-2d09f242fb7d","sourcePort":"out-Success","targetId":"eb93d4f1-4374-7972-08ad-0e20efeaead7","targetPort":"sendEvent"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"Email","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Data","type":"*","plug":"output","index":2},{"name":"Password","type":"*","group":"Inputs","plug":"input","index":2},{"name":"Error","type":"*","plug":"output","index":3}],"roots":[]}]